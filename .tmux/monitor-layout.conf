# Monitoring Layout - Production-like monitoring
# Performance, errors, and risk indicators

new-window -n 'Monitoring'
split-window -h -p 50
split-window -v -p 66
split-window -v -p 50
select-pane -t 0
split-window -v -p 66
split-window -v -p 50

# Performance metrics
select-pane -t 0
send-keys 'rails runner "require \"benchmark\"; loop { puts Benchmark.measure { ActiveRecord::Base.connection.execute(\"SELECT 1\") }; sleep 2 }"' C-m

# Memory monitoring
select-pane -t 1
send-keys 'watch -n 2 "ps aux | grep rails | awk \"{print \$5, \$6, \$11}\""' C-m

# Request logs
select-pane -t 2
send-keys 'tail -f log/production.log | grep "Completed"' C-m

# Error tracking
select-pane -t 3
send-keys 'tail -f log/production.log | grep -E "ERROR|FATAL|WARN"' C-m

# Database queries
select-pane -t 4
send-keys 'tail -f log/development.log | grep "SQL"' C-m

# Cache hits/misses
select-pane -t 5
send-keys 'watch -n 5 "redis-cli INFO stats | grep -E \"keyspace_hits|keyspace_misses\""' C-m